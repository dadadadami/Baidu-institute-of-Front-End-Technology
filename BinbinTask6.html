<!--
基于任务四进行升级
将新元素输入框从input改为textarea
允许一次批量输入多个内容，格式可以为数字、中文、英文等，可以通过用回车，逗号（全角半角均可），顿号，空格（全角半角、Tab等均可）等符号作为不同内容的间隔
增加一个查询文本输入框，和一个查询按钮，当点击查询时，将查询词在各个元素内容中做模糊匹配，将匹配到的内容进行特殊标识，如文字颜色等。举例，内容中有abcd，查询词为ab或bc，则该内容需要标识
-->

<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>IFE JavaScript Task 01</title>
    <style type="text/css">
        textarea {width:50%; height:50%;}
        ul{ list-style:none; padding:0;}
        li{ display:inline; text-align:center; background-color:red; padding:15px; margin:5px 5px; color:#FFF; font-weight:bold;}
    </style>
  </head>
<body>

  <div align="center">
    <textarea id = "input"></textarea>
  </div><br />
  <div align="center">
    <button id="button1">左侧入</button>
    <button id="button2">右侧入</button>&nbsp;&nbsp;&nbsp;&nbsp;
    <button id="button3">左侧出</button>
    <button id="button4">右侧出</button>
  </div><br />

  <div align="center"><ul id="que"></ul></div><br />
   
  <div align="center"><input type="text" id="search">&nbsp;&nbsp;&nbsp;<button id="button5">查询</button></div>
<script type="text/javascript">

(function() {
  /*    
  在注释下方写下代码
  给按钮button绑定一个点击事件
  在事件处理函数中
  获取aqi-input输入的值，并显示在aqi-display中
  */
  document.getElementById("button1").onclick = function(){ //给按钮button1绑定点击事件
      var value = document.getElementById("input").value;
      var valueArr = value.split(/ +|　+|\n|,|，|，|，|、/g);
      var flag = false;
      for(var i=0; i<valueArr.length; i++){
        if(valueArr[i]){
          flag = true;
          var li = document.createElement("li");
          var node = document.createTextNode(valueArr[i]);
          li.appendChild(node);
          var list  =document.getElementById("que")
          list.insertBefore(li,list.childNodes[0]);
        }
      }
      if(!flag){
        alert("Please input some content !")
      }
  };

  document.getElementById("button2").onclick = function(){ //给按钮button2绑定点击事件
      var value = document.getElementById("input").value;
      var valueArr = value.split(/ +|　+|\n|,|，|，|，|、/g);
      var flag = false
      for(var i=0; i<valueArr.length; i++){
        if(valueArr[i]){    //从右侧插入队列
          flag = true;
          li = document.createElement("li");
          node = document.createTextNode(valueArr[i]);
          li.appendChild(node);
          document.getElementById("que").appendChild(li);
        }
     }
     if(!flag){
        alert("Please input some content !")
      }
  };

  document.getElementById("button3").onclick = function(){ //给按钮button3绑定点击事件
      var list = document.getElementById("que");
      if(list.childNodes.length){                   //队列中有数字，从左侧删除一个数字
          var temp = list.childNodes[0].innerHTML;
          list.removeChild(list.childNodes[0]); 
          setTimeout(function() {alert(temp);}, 1);//确保删除后弹出
      }
      else
          alert("There is no content in the queue .")   
  };

  document.getElementById("button4").onclick = function(){ //给按钮button4绑定点击事件
      var list = document.getElementById("que");
      if(list.childNodes.length){                  //队列中有数字，从右侧删除一个数字
          temp = list.lastChild.innerHTML;
          list.removeChild(list.lastChild);
          setTimeout(function() {alert(temp);}, 1); //确保删除后弹出
      }
      else
          alert("There is no content in the queue .")  
  };

  document.getElementById("button5").onclick = function(){  //模糊匹配
    var list = document.getElementById("que");
    var searchText = document.getElementById("search").value;
    if( !searchText ){
        alert("Please input the search content !");
        return;
    }
    var flag = false;
    for(var i = 0; i<list.childNodes.length;i++){
        if(list.childNodes[i].innerHTML.search(searchText) != -1){
          flag = true;
          list.childNodes[i].style.color = "yellow";
        }
        else
          list.childNodes[i].style.color = "#FFF";
    }

    if(!flag){
      setTimeout("alert('There is no related content in the queue !')",100);
    }
    else{
      setTimeout("alert('The color of results has been changed to yellow !')",100);
    }
  }

})();

</script>
</body>
</html>
