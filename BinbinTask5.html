<!--
基于上一任务
限制输入的数字在10-100
队列元素数量最多限制为60个，当超过60个时，添加元素时alert出提示
队列展现方式变化如图，直接用高度表示数字大小
实现一个简单的排序功能，如冒泡排序（不限制具体算法），用可视化的方法表达出来，参考见下方参考资料
-->

<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>IFE JavaScript Task 01</title>
    <style type="text/css">
        ul{ list-style:none; padding:0;}
        li{ display:inline-block; text-align:center;background-color:red; padding:15px; margin:5px 5px; color:#FFF; font-weight:bold;}
    </style>
  </head>
<body>

  <input id="number" type="text">&nbsp;&nbsp;
  <button id="button1">左侧入</button>
  <button id="button2">右侧入</button>&nbsp;&nbsp;&nbsp;&nbsp;
  <button id="button3">左侧出</button>
  <button id="button4">右侧出</button>&nbsp;&nbsp;&nbsp;&nbsp;
  <button id="button5">冒泡排序</button>
  <ul id="que"></ul>
<script type="text/javascript">

(function() {
  /*    
  在注释下方写下代码
  给按钮button绑定一个点击事件
  在事件处理函数中
  获取aqi-input输入的值，并显示在aqi-display中
  */
  document.getElementById("button1").onclick = function(){ //给按钮button1绑定点击事件
      var value = document.getElementById("number").value;
      var re = /^[0-9]+.?[0-9]*$/;
      var list = document.getElementById("que");
      if(list.childNodes.length <= 60 && re.test(value) && value >= 10 && value <= 100){           //输入的数字在10-100之间且队列中元素不足60个，从左侧插入队列
          var li = document.createElement("li");
          li.style.height = value + "px";
          list.insertBefore(li,list.childNodes[0]);
      }
      else if(list.childNodes.length > 60)                                         //队列中元素已达60，给予提示
          alert("The number of numbers in the queue is 60, and you can't add new number to the queue .");
      else
          alert("Please input a number between 10 and 100 !");
  };

  document.getElementById("button2").onclick = function(){ //给按钮button2绑定点击事件
      value = document.getElementById("number").value;
      list = document.getElementById("que");
      re = /^[0-9]+.?[0-9]*$/;
      if(list.childNodes.length <= 60 && re.test(value) && value >= 10 && value <= 100){           //输入的数字在10-100之间且队列中元素不足60个，从右侧插入队列
          li = document.createElement("li");
          li.style.height = value + "px";
          list.appendChild(li);
     }
     else if(list.childNodes.length > 60)                                           //队列中元素已达60，给予提示
          alert("The number of numbers in the queue is 60, and you can't add new number to the queue .");
      else
          alert("Please input a number between 10 and 100 !");
  };

  document.getElementById("button3").onclick = function(){ //给按钮button3绑定点击事件
      list = document.getElementById("que");
      if(list.childNodes.length){                   //队列中有数字，从左侧删除一个数字
          var temp = parseInt(list.childNodes[0].style.height); //parseInt()函数去掉单位
          list.removeChild(list.childNodes[0]); 
          setTimeout(function() {alert(temp);}, 1);//确保删除后弹出
      }
      else
          alert("There is no numbers in the queue .")   
  };

  document.getElementById("button4").onclick = function(){ //给按钮button4绑定点击事件
      list = document.getElementById("que");
      if(list.childNodes.length){                  //队列中有数字，从右侧删除一个数字
          temp = parseInt(list.lastChild.style.height);
          list.removeChild(list.lastChild);
          setTimeout(function() {alert(temp);}, 1); //确保删除后弹出
      }
      else
          alert("There is no numbers in the queue .")  
  };


  function sleep(numberMillis) {
      var now = new Date();
      var exitTime = now.getTime() + numberMillis;
      while (true) {
          now = new Date();
          if (now.getTime() > exitTime)
              return;
      }
  }


  document.getElementById("button5").onclick = function(){  //冒泡排序
      list = document.getElementById("que");
      var len = list.childNodes.length;

      for(var i = 0; i < len; i++){
        for(var j = i+1; j < len; j++){
            var iheight = parseInt(list.childNodes[i].style.height);
            var jheight = parseInt(list.childNodes[j].style.height);
            if(iheight > jheight){
                list.childNodes[i].style.height = jheight + 'px'; 
                list.childNodes[j].style.height = iheight + 'px';
            }
        }
      }
  }

})();

</script>
</body>
</html>
